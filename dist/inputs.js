const charBlocks=document.querySelector("#character-blocks");window.charInputs={},window.onload=()=>{window.addInput()},window.getCharacters=()=>{const e=[];return document.querySelectorAll(".character-block").forEach(n=>{const{children:t}=n,r={};for(const a of t[1].querySelector(".pronouns").querySelectorAll("input")){const c=a;r[c.name]=c.value||c.placeholder}const o=document.querySelector(".char-"+t[0].dataset.charNum+".plural").checked;e.push({name:t[0].value||t[0].placeholder,pronouns:r,plural:o,charNum:Number(t[0].dataset.charNum)})}),e},window.getCharacterInput=(e,...n)=>{const t=charBlocks.children[e-1];if(!t)return;n="."+n.join(".");const r=t.querySelector("input"+n);return r.value||r.placeholder};const style=document.createElement("style");document.head.append(style),window.addInput=function(){const e=window.getCharacters().length+1,n=document.createElement("div");n.className="character-block";const t=document.createElement("input");t.classList.add("name","char-"+e),t.dataset.charNum=e,t.name="name",t.setAttribute("placeholder","character "+e),t.setAttribute("type","text"),t.addEventListener("input",r=>window.updateFields(r)),n.appendChild(t),n.appendChild(window.createPronounsDiv(e)),style.sheet.insertRule(`.char-${e} { background: var(--accent-${e%10||10}) }`),charBlocks.append(n),window.fields[e]=n.querySelectorAll(".field"),window.charInputs[e]={name:document.querySelector("input.name.char-"+e),pronouns:document.querySelectorAll("input.pronoun.char-"+e),settings:document.querySelectorAll("input.pronoun-setting.char-"+e)},window.updateCharacterRange(e)},window.removeInput=function(){const e=document.querySelectorAll(".character-block");e.length>1?(window.fields.splice(e.length,1),e[e.length-1].remove()):console.debug("there's only one..."),window.updateCharacterRange(e.length-1)};

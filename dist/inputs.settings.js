window.settings={},document.querySelectorAll("#settings input").forEach(a=>{window.settings[a.id]=document.getElementById(a.id)}),console.debug(window.settings),document.querySelector("#prompt-characters-min").addEventListener("input",a=>{if(isNaN(a.target.valueAsNumber))return;const{target:e}=a,t=clamp(e.valueAsNumber,e.min,e.max);if(window.settings["character-range-toggle"].checked){const n=document.querySelector("#prompt-characters-max");n.min=t+1,n.value&&(n.value=clamp(n.valueAsNumber,n.min,n.max))}}),document.querySelectorAll("#settings input[type=number]").forEach(a=>{a.addEventListener("input",e=>{const{target:t}=e;t.value=clamp(t.value,t.min,t.max),t.value==="1"?t.nextSibling.nodeValue=" character":t.nextSibling.nodeValue=" characters"})}),window.updateCharacterRange=function(a){const e=document.querySelector("#prompt-characters-min"),t=document.querySelector("#prompt-characters-max");window.settings["character-range-toggle"].checked?(e.max=a-1,e.placeholder=1):(e.max=a||1,e.placeholder=a),!e.value&&e.placeholder>1?e.nextSibling.nodeValue=" characters":e.nextSibling.nodeValue=" character",t.max=a,t.placeholder=a;const r=document.querySelector("#character-range-toggle");r.disabled=a===1,a===1&&r.checked&&(r.checked=!1,t.parentElement.hidden=!0,console.debug("updated setting character-range-toggle to value false","(too few characters!)"))},document.querySelector("#character-range-toggle").addEventListener("input",a=>{const e=document.querySelectorAll("#settings input[type=number]"),t=window.getCharacters().length;a.target.checked?(e[0].previousSibling.nodeValue="Use prompts with at least ",e[1].parentElement.hidden=!1,e[0].placeholder=1,e[0].max=t-1,e[1].max=t):(e[0].previousSibling.nodeValue="Use prompts with ",e[1].parentElement.hidden=!0,e[0].placeholder=t,e[0].max=t)});const clamp=(a,e,t)=>Math.min(Math.max(a,e),t);
